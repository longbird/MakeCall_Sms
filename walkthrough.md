# MakeCall_Sms 수정 사항 적용

로직 결함 및 API 호환성 문제를 해결하고, 사용자의 요청에 따라 SMS 수신 로직을 변경했으며, 서버 주소 입력 기능을 추가했습니다.

## 1. SMS 수신 로직 변경 (제한 제거)
**파일:** `SmsReceiver.java`
- **변경 사항:** SMS 수신 시 최근 통화한 번호인지 확인하는 로직(`isRecentCall`)을 **제거**했습니다.
- **결과:** 이제 수신되는 **모든** SMS가 전화번호를 기준으로 저장되고 서버로 전송됩니다. 통화 이력과 관계없이 SMS 정보를 수집합니다.

## 2. 통화 종료 호환성 수정
**파일:** `PhoneStateReceiver.java`
- **변경 사항:** 안드로이드 9 (Pie) 이상을 위해 `TelecomManager.endCall()`을 구현했습니다.
- **이점:** 이는 최신 기기에서 차단된 Reflection 방식을 대체하여, 프로그래밍 방식으로 통화를 종료하는 현대적이고 지원되는 방법을 제공합니다.
- **참고:** 이를 위해서는 `ANSWER_PHONE_CALLS` 권한이 필요하며, 해당 권한이 추가되었습니다.

## 3. 권한 업데이트
**파일:** `AndroidManifest.xml`, `MainActivity.java`
- **변경 사항:** `android.permission.ANSWER_PHONE_CALLS`를 추가했습니다.
- **이점:** 앱이 통화 종료를 위해 `TelecomManager`를 사용할 수 있도록 필요한 권한을 부여합니다.

## 4. 서버 주소 입력 기능 추가
**파일:** `activity_main.xml`, `MainActivity.java`, `ApiClient.java`
- **변경 사항:**
    - 메인 화면에 서버 주소를 입력할 수 있는 입력창을 추가했습니다.
    - 시작 버튼 클릭 시 입력된 주소의 유효성(IP 또는 도메인 형식)을 검사합니다.
    - 유효한 주소인 경우 해당 주소를 API 서버의 기본 URL로 설정합니다.
- **이점:** 앱을 다시 빌드하지 않고도 테스트 환경이나 운영 환경에 맞춰 서버 주소를 변경할 수 있습니다.

## 검증
- **서버 주소:** 앱 실행 후 서버 주소 입력창에 `http://192.168.0.1:8080`과 같은 형식으로 입력하고 시작 버튼을 누르세요. 유효하지 않은 주소 입력 시 에러 메시지가 표시됩니다.
- **SMS:** 아무 번호로나 SMS를 보내보세요. 앱이 실행 중이라면 해당 SMS가 DB에 저장되고 서버로 전송되어야 합니다.
- **자동 통화:** 안드로이드 9+ 기기에서 자동 통화 프로세스를 실행하세요. 앱이 이제 자동으로 전화를 끊을 수 있어야 합니다 (사용자가 새 권한을 허용하는 경우).
